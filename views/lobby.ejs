<!DOCTYPE html>
<html>
<head>
    <title>è¨˜éŒ„</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#388697">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        .bg-primary { background-color: #388697 !important; }
        .text-primary { color: #388697 !important; }
        .btn-outline-primary { color: #388697; border-color: #388697; }
        .btn-outline-primary:hover, .btn-primary { background-color: #388697; border-color: #388697; color: white; }
        .hover-shadow:hover { transform: translateY(-3px); box-shadow: 0 .5rem 1rem rgba(0,0,0,.15)!important; transition: all .2s; }
        body { padding-bottom: 100px; background-color: #f8f9fa; }
        /* ğŸ”¥ FIX: Standard Navbar Height */
        .navbar { margin-top: 0 !important; padding-top: 10px; padding-bottom: 10px; min-height: 60px; }
        .sticky-footer { position: fixed; bottom: 0; left: 0; right: 0; background: white; padding: 15px; box-shadow: 0 -2px 10px rgba(0,0,0,0.1); z-index: 1000; border-top: 1px solid #eee; }
        .dropdown-item { padding: 10px 15px; font-size: 1rem; }
        ::-webkit-scrollbar { display: none; }
        html, body { -ms-overflow-style: none; scrollbar-width: none; }
    </style>
</head>
<body class="bg-light">

<nav class="navbar navbar-dark bg-primary mb-4 sticky-top">
    <div class="container-fluid position-relative">
        <div class="d-flex align-items-center"><span class="navbar-brand mb-0 h1 fs-4">ğŸ“‚</span></div>
        <div class="position-absolute top-50 start-50 translate-middle w-50 text-center"><span class="text-white fs-5 fw-bold text-truncate d-block" data-i18n="header_title">è¨˜éŒ„</span></div>
        <div class="d-flex align-items-center"><div class="dropdown"><button class="btn btn-link text-white text-decoration-none p-0 fs-3" type="button" data-bs-toggle="dropdown">âš™ï¸</button><ul class="dropdown-menu dropdown-menu-end shadow-lg border-0" style="min-width: 160px;"><li><button class="dropdown-item" onclick="toggleLanguage()">ğŸŒ <span id="langLabel">ENG</span></button></li></ul></div></div>
    </div>
</nav>

<div class="container">
    <div class="row g-3 justify-content-center">
        <% if (activities.length === 0) { %>
            <div class="col-12 text-center text-muted" data-i18n="no_activity">æš«æ™‚æœªæœ‰æ´»å‹•ï¼Œè«‹åœ¨ä¸‹æ–¹å»ºç«‹ä¸€å€‹ï¼</div>
        <% } %>
        <% activities.forEach(act => { %>
            <div class="col-12 col-md-6 col-lg-4">
                <a href="/activity/<%= act.id %>" class="text-decoration-none">
                    <div class="card shadow-sm hover-shadow h-100">
                        <div class="card-body text-center">
                            <h3 class="card-title text-primary"><%= act.name %></h3>
                            <p class="badge bg-secondary"><% if(act.type === 'split') { %><span data-i18n="mode_split">å¤¾éŒ¢æ¨¡å¼</span><% } else { %><span data-i18n="mode_bowling">è¨ˆå±€æ¨¡å¼</span><% } %></p>
                        </div>
                    </div>
                </a>
            </div>
        <% }) %>
    </div>

    <div class="collapse mt-4" id="createActivityBox">
        <div class="card mx-auto shadow-sm border-primary" style="max-width: 500px;">
            <div class="card-header bg-white text-primary fw-bold text-center" data-i18n="new_activity_title">æ–°æ´»å‹•è³‡æ–™</div>
            <div class="card-body">
                <form action="/create-activity" method="POST">
                    <div class="mb-3"><label class="form-label" data-i18n="label_name">æ´»å‹•åç¨±</label><input type="text" name="name" class="form-control" placeholder="Activity Name" required></div>
                    <div class="mb-3"><label class="form-label" data-i18n="label_type">è¨ˆè²»æ¨¡å¼</label><select name="type" class="form-select" id="activityType"><option value="split" data-i18n="opt_split">Pickleball / é£Ÿé£¯ (è¼¸å…¥ç¸½æ•¸ Ã· äººé ­)</option><option value="bowling" selected data-i18n="opt_bowling">ä¿é½¡çƒ (æŒ‰å±€æ•¸è¨ˆ x å–®åƒ¹)</option></select></div>
                    <button class="btn btn-primary w-100 fw-bold" data-i18n="btn_create_submit">ç«‹å³å»ºç«‹</button>
                </form>
            </div>
        </div>
    </div>
</div>

<div class="sticky-footer">
    <div class="container" style="max-width: 500px;">
        <button class="btn btn-primary w-100 py-2 fw-bold shadow-sm fs-5" type="button" data-bs-toggle="collapse" data-bs-target="#createActivityBox" onclick="setTimeout(() => window.scrollTo({ top: document.body.scrollHeight, behavior: 'smooth' }), 300)">â• <span data-i18n="btn_create_new">å»ºç«‹æ–°æ´»å‹•</span></button>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script>
    const translations = { zh: { header_title: "è¨˜éŒ„", no_activity: "æš«æ™‚æœªæœ‰æ´»å‹•ï¼Œè«‹åœ¨ä¸‹æ–¹å»ºç«‹ä¸€å€‹ï¼", mode_split: "å¤¾éŒ¢æ¨¡å¼", mode_bowling: "è¨ˆå±€æ¨¡å¼", btn_create_new: "å»ºç«‹æ–°æ´»å‹•", new_activity_title: "æ–°æ´»å‹•è³‡æ–™", label_name: "æ´»å‹•åç¨±", label_type: "è¨ˆè²»æ¨¡å¼", opt_split: "Pickleball / é£Ÿé£¯ (è¼¸å…¥ç¸½æ•¸ Ã· äººé ­)", opt_bowling: "ä¿é½¡çƒ (æŒ‰å±€æ•¸è¨ˆ x å–®åƒ¹)", btn_create_submit: "ç«‹å³å»ºç«‹" }, en: { header_title: "Records", no_activity: "No activities yet. Create one below!", mode_split: "Split Mode", mode_bowling: "Game Mode", btn_create_new: "New Activity", new_activity_title: "Activity Info", label_name: "Activity Name", label_type: "Billing Type", opt_split: "Pickleball / Split Bill", opt_bowling: "Bowling", btn_create_submit: "Create Now" } };
    let currentLang = localStorage.getItem('appLang') || 'zh';
    function applyLanguage() { const langData = translations[currentLang]; document.querySelectorAll('[data-i18n]').forEach(el => { const key = el.getAttribute('data-i18n'); if (langData[key]) el.innerText = langData[key]; }); document.getElementById('langLabel').innerText = currentLang === 'zh' ? 'ä¸­' : 'ENG'; }
    function toggleLanguage() { currentLang = currentLang === 'zh' ? 'en' : 'zh'; localStorage.setItem('appLang', currentLang); applyLanguage(); }
    applyLanguage();
</script>
</body>
</html>